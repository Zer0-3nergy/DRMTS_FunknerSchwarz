// -------------------------------------------------------------
// 
// File Name: F:\MyGit_Folder\DRMTS_FunknerSchwarz\behav\Verilog\dsm_l2_sim_deci_cic_HDLgeneration\CICDecimation.v
// Created: 2026-01-30 10:39:16
// 
// Generated by MATLAB 25.2, HDL Coder 25.2, and Simulink 25.2
// 
// -------------------------------------------------------------


// -------------------------------------------------------------
// 
// Module: CICDecimation
// Source Path: dsm_l2_sim_deci_cic_HDLgeneration/DECIMATOR/CICDecimation
// Hierarchy Level: 1
// Model version: 17.87
// 
// -------------------------------------------------------------

`timescale 1 ns / 1 ns

module CICDecimation
          (clk,
           reset,
           enb,
           dataIn,
           validIn,
           dataOut,
           validOut);


  input   clk;
  input   reset;
  input   enb;
  input   signed [1:0] dataIn;  // sfix2
  input   validIn;
  output  signed [15:0] dataOut;  // sfix16_En14
  output  validOut;


  wire softReset;
  reg signed [1:0] dataInreg;  // sfix2
  reg  validInreg;
  wire signed [22:0] integOut_re;  // sfix23
  wire signed [22:0] integOut_im;  // sfix23
  wire [11:0] downsampleVal;  // ufix12
  wire signed [22:0] dsOut_re;  // sfix23
  wire signed [22:0] dsOut_im;  // sfix23
  wire ds_vout;
  wire signed [17:0] combOut_re;  // sfix18_E5
  wire signed [17:0] combOut_im;  // sfix18_E5
  wire c_vout;
  reg  [8:0] intdelay_reg;  // ufix1 [9]
  wire signed [15:0] invalidOut_1;  // sfix16_En14
  wire signed [15:0] gcOut_re;  // sfix16_En14
  wire signed [15:0] dataOut_re;  // sfix16_En14


  assign softReset = 1'b0;

  always @(posedge clk or posedge reset)
    begin : intdelay_process
      if (reset == 1'b1) begin
        dataInreg <= 2'sb00;
      end
      else begin
        if (enb) begin
          if (softReset == 1'b1) begin
            dataInreg <= 2'sb00;
          end
          else begin
            dataInreg <= dataIn;
          end
        end
      end
    end

  always @(posedge clk or posedge reset)
    begin : intdelay_1_process
      if (reset == 1'b1) begin
        validInreg <= 1'b0;
      end
      else begin
        if (enb) begin
          if (softReset == 1'b1) begin
            validInreg <= 1'b0;
          end
          else begin
            validInreg <= validIn;
          end
        end
      end
    end

  iSection u_iSection (.clk(clk),
                       .reset(reset),
                       .enb(enb),
                       .dataInreg(dataInreg),  // sfix2
                       .validInreg(validInreg),
                       .internalReset(softReset),
                       .integOut_re(integOut_re),  // sfix23
                       .integOut_im(integOut_im)  // sfix23
                       );

  assign downsampleVal = 12'b000010000000;

  dsSection u_dsSection (.clk(clk),
                         .reset(reset),
                         .enb(enb),
                         .integOut_re(integOut_re),  // sfix23
                         .integOut_im(integOut_im),  // sfix23
                         .validInreg(validInreg),
                         .downsampleVal(downsampleVal),  // ufix12
                         .i_rstout(softReset),
                         .dsOut_re(dsOut_re),  // sfix23
                         .dsOut_im(dsOut_im),  // sfix23
                         .ds_vout(ds_vout)
                         );

  cSection u_cSection (.clk(clk),
                       .reset(reset),
                       .enb(enb),
                       .dsOut_re(dsOut_re),  // sfix23
                       .dsOut_im(dsOut_im),  // sfix23
                       .ds_vout(ds_vout),
                       .internalReset(softReset),
                       .combOut_re(combOut_re),  // sfix18_E5
                       .combOut_im(combOut_im),  // sfix18_E5
                       .c_vout(c_vout)
                       );

  always @(posedge clk or posedge reset)
    begin : intdelay_2_process
      if (reset == 1'b1) begin
        intdelay_reg <= {9{1'b0}};
      end
      else begin
        if (enb) begin
          if (softReset == 1'b1) begin
            intdelay_reg <= {9{1'b0}};
          end
          else begin
            intdelay_reg[0] <= c_vout;
            intdelay_reg[32'sd8:32'sd1] <= intdelay_reg[32'sd7:32'sd0];
          end
        end
      end
    end

  assign validOut = intdelay_reg[8];

  assign invalidOut_1 = 16'sb0000000000000000;

  gcSection u_gcSection (.clk(clk),
                         .reset(reset),
                         .enb(enb),
                         .combOut_re(combOut_re),  // sfix18_E5
                         .combOut_im(combOut_im),  // sfix18_E5
                         .internalReset(softReset),
                         .gcOut_re(gcOut_re)  // sfix16_En14
                         );

  castSection u_castSection (.gcOut_re(gcOut_re),  // sfix16_En14
                             .dataOut_re(dataOut_re)  // sfix16_En14
                             );

  assign dataOut = (validOut == 1'b0 ? invalidOut_1 :
              dataOut_re);

endmodule  // CICDecimation

