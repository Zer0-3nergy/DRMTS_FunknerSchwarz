# Contents of this folder
This folder contains behavioral simulations of a **2nd order Sigma-Delta Modulator** including
the decimation stage, as well as models for generating the decimation stage in an HDL language
(Verilog/VHDL). <br>

The focus lies on: <br>
- recreating a Sigma-Delta Modulator based on the example described in  
  *Understanding Delta-Sigma Data Converters, R. Schreier, 2009*, <br>
- designing a decimator consisting of one SINC3 and two halfband filters to reconstruct the
  signal from the modulator output and to decimate the oversampled signal back to an output
  sampling frequency of 1 kHz (M = 512), <br>
- preparing and generating HDL code in order to perform a co-simulation in Xschem to validate
  the design. <br>

---

## DSM_Matlab
MATLAB and Simulink models used for behavioral simulation, comparison, HDL preparation, and
HDL code generation.

- **`dsm_o2_Simulink_compare.m`**  
  Compares a **2nd order Sigma-Delta Modulator** implemented in Simulink
  (*`dsm_l2_sim_deci_ideal_v2.slx`*) with a model from the Sigma-Delta Toolbox by R. Schreier.  
  This comparison serves as a validation of the Simulink implementation.  
  The modulator design is based on a 1st order example provided in our Aulis group and extended
  using the example described in the book. <br>

- **`dsm_o2_Simulink_decimation.m`**  
  Extends the Sigma-Delta Modulator with a decimation stage. Two implementations are used:
  - *`dsm_l2_sim_deci_ideal_v2.slx`*: ideal decimation using FIR decimator blocks, structured
    according to the theoretical model.  
  - *`dsm_l2_sim_deci_cic_HDL.slx`*: version where the SINC3 filter is replaced by a CIC filter,
    since the SINC3 filter results in a very large filter order. This model uses HDL Coder
    compatible blocks and can therefore be used for HDL code generation.  

  Both models are compared using the same input signal. <br>

- **`dsm_o2_Simulink_HDLgeneration.m`**  
  Used to validate the model setup prior to **HDL code generation** with MATLAB HDL Coder.
  It uses a copy of *`dsm_l2_sim_deci_cic_HDL.slx`* named
  *`dsm_l2_sim_deci_cic_HDLgeneration.slx`*, which is identical in structure.  
  This separation was done to keep simulation and code generation independent.  

  The generated Verilog and VHDL code can be found in their respective folders.
  Additionally, the Verilog code was compiled using Verilator for co-simulation with ngspice
  in Xschem. The compiled file *`DECIMATOR.so`* is located in the Verilog folder. <br>

- **`dsm_decimator_sim.m`**  
  Simulates only the decimation stage using Sigma-Delta Modulator output data generated by
  LTspice and Xschem. The corresponding simulation data is located in the folder
  *`spice_sim`*. <br>
